@{
    Layout = "/Views/_UserLayout.cshtml";
    var context = new Overstag.Models.OverstagContext();
    var model = context.Events.OrderBy(e => e.Date).ToList();
}
<div>
    <h3 class="center-align">Agenda</h3>
    @await Html.PartialAsync("~/Views/Home/Events.cshtml", model);
</div>
<div>
    <h3 class="center-align">Inschrijvingen</h3>
    <div id="partial">

    </div>
</div>
<div id="uitschrijven" class="modal">
    <div class="modal-content">
        <h4>Weet je zeker dat je jezelf wilt afmelden voor deze avond?</h4>
        <p>Natuurlijk kun je je altijd weer opnieuw inschrijven, voor het geval je er spijt van krijgt.</p>
    </div>
    <div class="modal-footer">
        <a class="modal-close waves-effect btn green white-text">Annuleren</a>
        <a onclick="User.remove()" class="modal-close waves-effect btn red white-text">Toch uitschrijven</a>
    </div>
</div>
<script>
    let eventtoremove;
    var User = {
        init: function () {
            $('#_aevent').addClass('active');
            $('#_maevent').addClass('active');
            User.loadcontent();
        },
        remove: function() {
            //Uitschrijven

            $.post("/User/postDeleteEvent", { EventId: eventtoremove }, function (response) {
                if (response.status == 'success') {
                    M.toast({ html: 'Successvol uitgeschreven', classes: 'orange' });
                    User.loadcontent();
                }
                else {
                    //status = error
                    M.toast({ html: response.error, classes: 'red' });
                }
            }, 'json');
        },
        loadcontent: function(){
           $('#partial').load('/User/Subscriptions');
        }
    }

    User.init();

</script>

