#pragma checksum "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "4df3e88aab1d081ee57924f87bcdc6aaf5b1d245"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_User_Payment), @"mvc.1.0.view", @"/Views/User/Payment.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/User/Payment.cshtml", typeof(AspNetCore.Views_User_Payment))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 2 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
using Microsoft.AspNetCore.Http;

#line default
#line hidden
#line 3 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
using Microsoft.EntityFrameworkCore;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"4df3e88aab1d081ee57924f87bcdc6aaf5b1d245", @"/Views/User/Payment.cshtml")]
    public class Views_User_Payment : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<Overstag.Models.NoDB.UnpayedEvents>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#line 4 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
  
    Layout = "~/Views/_UserLayout.cshtml";
    ViewBag.Title = "Betalingen";
    System.Globalization.CultureInfo culture = new System.Globalization.CultureInfo("nl-NL");
    var currentuser = new Overstag.Models.OverstagContext().Accounts.Include(f => f.Family).First(g => g.Token == Context.Session.GetString("Token"));

#line default
#line hidden
            BeginContext(449, 13, true);
            WriteLiteral("\r\n    <div>\r\n");
            EndContext();
#line 12 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
         if (currentuser.Family != null)
        {

#line default
#line hidden
            BeginContext(515, 123, true);
            WriteLiteral("            <h4 class=\"red-text center-align\" style=\"font-weight: bold;\">De facturering wordt beheert door uw ouder.</h4>\r\n");
            EndContext();
#line 15 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
        }
        else
        {

#line default
#line hidden
            BeginContext(674, 92, true);
            WriteLiteral("            <h3>Niet-gefactureerde activiteiten</h3>\r\n            <div id=\"unpayedevents\">\r\n");
            EndContext();
#line 20 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                 if (Model.UnfacturedEvents.Count() > 0)
                {

#line default
#line hidden
            BeginContext(843, 481, true);
            WriteLiteral(@"                    <table class=""responsive-table"">
                        <thead>
                            <tr>
                                <th>Wat</th>
                                <th>Wanneer</th>
                                <th>Omschrijving</th>
                                <th>Aantal drankjes</th>
                                <th>Kosten</th>
                            </tr>
                        </thead>
                        <tbody>
");
            EndContext();
#line 33 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                              double topay = 0; 

#line default
#line hidden
            BeginContext(1375, 28, true);
            WriteLiteral("                            ");
            EndContext();
#line 34 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                             foreach (var e in Model.UnfacturedEvents)
                            {
                                var p = Model.Subscriptions.First(f => f.EventID == e.Id);
                                double c = (double)e.Cost;
                                topay += c;
                                topay += p.ConsumptionTax;

#line default
#line hidden
            BeginContext(1735, 78, true);
            WriteLiteral("                                <tr>\r\n                                    <td>");
            EndContext();
            BeginContext(1814, 7, false);
#line 41 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                                   Write(e.Title);

#line default
#line hidden
            EndContext();
            BeginContext(1821, 47, true);
            WriteLiteral("</td>\r\n                                    <td>");
            EndContext();
            BeginContext(1869, 29, false);
#line 42 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                                   Write(e.When.ToString("D", culture));

#line default
#line hidden
            EndContext();
            BeginContext(1898, 4, true);
            WriteLiteral(" om ");
            EndContext();
            BeginContext(1903, 29, false);
#line 42 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                                                                     Write(e.When.ToString("t", culture));

#line default
#line hidden
            EndContext();
            BeginContext(1932, 47, true);
            WriteLiteral("</td>\r\n                                    <td>");
            EndContext();
            BeginContext(1980, 13, false);
#line 43 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                                   Write(e.Description);

#line default
#line hidden
            EndContext();
            BeginContext(1993, 47, true);
            WriteLiteral("</td>\r\n                                    <td>");
            EndContext();
            BeginContext(2041, 18, false);
#line 44 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                                   Write(p.ConsumptionCount);

#line default
#line hidden
            EndContext();
            BeginContext(2059, 11, true);
            WriteLiteral(" <b>(&euro;");
            EndContext();
            BeginContext(2072, 22, false);
#line 44 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                                                                  Write(p.ConsumptionTax / 100);

#line default
#line hidden
            EndContext();
            BeginContext(2095, 61, true);
            WriteLiteral(",00)</b></td>\r\n                                    <td>&euro;");
            EndContext();
            BeginContext(2157, 36, false);
#line 45 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                                         Write(Math.Round(c / 100, 2).ToString("F"));

#line default
#line hidden
            EndContext();
            BeginContext(2193, 47, true);
            WriteLiteral(" </td>\r\n                                </tr>\r\n");
            EndContext();
#line 47 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                            }

#line default
#line hidden
            BeginContext(2271, 189, true);
            WriteLiteral("                            <tr class=\"grey lighten-4\">\r\n                                <td colspan=\"5\" class=\"center\">\r\n                                    <b>Totaal te verrekenen: &euro;");
            EndContext();
            BeginContext(2461, 59, false);
#line 50 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                                                              Write(Math.Round(Convert.ToDecimal(topay) / 100, 2).ToString("F"));

#line default
#line hidden
            EndContext();
            BeginContext(2520, 144, true);
            WriteLiteral("</b>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n");
            EndContext();
#line 55 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                }
                else
                {

#line default
#line hidden
            BeginContext(2724, 65, true);
            WriteLiteral("                    <h5>Geen ongefactureerde activiteiten!</h5>\r\n");
            EndContext();
#line 59 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                }

#line default
#line hidden
            BeginContext(2808, 84, true);
            WriteLiteral("            </div>\r\n            <h3>Facturen</h3>\r\n            <div id=\"factures\">\r\n");
            EndContext();
#line 63 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                 if (Model.UnfacturedEvents.Count() > 0)
                {

#line default
#line hidden
            BeginContext(2969, 230, true);
            WriteLiteral("                    <h6>&nbsp;Factuur genereren van ongefactureerde avonden</h6>\r\n                    <a href=\"#ginvoice\" class=\"waves-effect waves-light btn modal-trigger\">Factuur genereren</a>\r\n                    <br /><br />\r\n");
            EndContext();
#line 68 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                }

#line default
#line hidden
            BeginContext(3218, 16, true);
            WriteLiteral("                ");
            EndContext();
#line 69 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                 if (Model.Invoices.Count() > 0)
                {

#line default
#line hidden
            BeginContext(3287, 46, true);
            WriteLiteral("                    <ul class=\"collapsible\">\r\n");
            EndContext();
#line 72 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                         foreach (var item in Model.Invoices)
                        {

#line default
#line hidden
            BeginContext(3423, 340, true);
            WriteLiteral(@"                            <li>
                                <div class=""collapsible-header"">
                                    <table>
                                        <tbody>
                                            <tr>
                                                <td><i class=""material-icons"">calendar_today</i>");
            EndContext();
            BeginContext(3764, 37, false);
#line 79 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                                                                                           Write(item.Timestamp.ToString("d", culture));

#line default
#line hidden
            EndContext();
            BeginContext(3801, 73, true);
            WriteLiteral("</td>\r\n                                                <td>Totaal: &euro;");
            EndContext();
            BeginContext(3875, 54, false);
#line 80 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                                                             Write(Math.Round((double)item.Amount / 100, 2).ToString("F"));

#line default
#line hidden
            EndContext();
            BeginContext(3929, 68, true);
            WriteLiteral("</td>\r\n                                                <td>Betaald: ");
            EndContext();
            BeginContext(3998, 87, false);
#line 81 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                                                        Write(Html.Raw((item.Payed) ? "<b class='green-text'>Ja</b>" : "<b class='red-text'>Nee</b>"));

#line default
#line hidden
            EndContext();
            BeginContext(4085, 258, true);
            WriteLiteral(@"</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class=""collapsible-body"">
");
            EndContext();
#line 87 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                                     if (!item.Payed)
                                    {

#line default
#line hidden
            BeginContext(4437, 84, true);
            WriteLiteral("                                        <a class=\"waves-effect waves-light btn blue\"");
            EndContext();
            BeginWriteAttribute("onclick", " onclick=\"", 4521, "\"", 4582, 3);
            WriteAttributeValue("", 4531, "Payment.getPay(\'", 4531, 16, true);
#line 89 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
WriteAttributeValue("", 4547, Uri.EscapeDataString(item.PayID), 4547, 33, false);

#line default
#line hidden
            WriteAttributeValue("", 4580, "\')", 4580, 2, true);
            EndWriteAttribute();
            BeginContext(4583, 62, true);
            WriteLiteral(">Betalen</a>\r\n                                        <br />\r\n");
            EndContext();
#line 91 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                                    }
                                    else
                                    {

#line default
#line hidden
            BeginContext(4765, 101, true);
            WriteLiteral("                                        <a class=\"waves-effect waves-light btn green\" target=\"_blank\"");
            EndContext();
            BeginWriteAttribute("href", " href=\"", 4866, "\"", 4918, 2);
            WriteAttributeValue("", 4873, "/Pay/Direct/", 4873, 12, true);
#line 94 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
WriteAttributeValue("", 4885, Uri.EscapeDataString(item.PayID), 4885, 33, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(4919, 21, true);
            WriteLiteral(">Factuur openen</a>\r\n");
            EndContext();
#line 95 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                                    }

#line default
#line hidden
            BeginContext(4979, 585, true);
            WriteLiteral(@"
                                    <table class=""responsive-table"">
                                        <thead>
                                            <tr>
                                                <th>Wat</th>
                                                <th>Wanneer</th>
                                                <th>Omschrijving</th>
                                                <th>Kosten</th>
                                            </tr>
                                        </thead>
                                        <tbody>
");
            EndContext();
#line 107 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                                             foreach (var e in item.Events)
                                            {

#line default
#line hidden
            BeginContext(5688, 110, true);
            WriteLiteral("                                                <tr>\r\n                                                    <td>");
            EndContext();
            BeginContext(5799, 7, false);
#line 110 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                                                   Write(e.Title);

#line default
#line hidden
            EndContext();
            BeginContext(5806, 63, true);
            WriteLiteral("</td>\r\n                                                    <td>");
            EndContext();
            BeginContext(5870, 29, false);
#line 111 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                                                   Write(e.When.ToString("D", culture));

#line default
#line hidden
            EndContext();
            BeginContext(5899, 4, true);
            WriteLiteral(" om ");
            EndContext();
            BeginContext(5904, 29, false);
#line 111 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                                                                                     Write(e.When.ToString("t", culture));

#line default
#line hidden
            EndContext();
            BeginContext(5933, 63, true);
            WriteLiteral("</td>\r\n                                                    <td>");
            EndContext();
            BeginContext(5997, 13, false);
#line 112 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                                                   Write(e.Description);

#line default
#line hidden
            EndContext();
            BeginContext(6010, 69, true);
            WriteLiteral("</td>\r\n                                                    <td>&euro;");
            EndContext();
            BeginContext(6080, 49, false);
#line 113 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                                                         Write(Math.Round((double)e.Cost / 100, 2).ToString("F"));

#line default
#line hidden
            EndContext();
            BeginContext(6129, 62, true);
            WriteLiteral("</td>\r\n                                                </tr>\r\n");
            EndContext();
#line 115 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                                            }

#line default
#line hidden
            BeginContext(6238, 230, true);
            WriteLiteral("\r\n                                            <tr>\r\n                                                <td colspan=\"4\" class=\"center-align white-text grey darken-1\">\r\n                                                    Totaal: &euro;");
            EndContext();
            BeginContext(6469, 54, false);
#line 119 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                                                             Write(Math.Round((double)item.Amount / 100, 2).ToString("F"));

#line default
#line hidden
            EndContext();
            BeginContext(6523, 60, true);
            WriteLiteral("<br />\r\n                                                    ");
            EndContext();
            BeginContext(6584, 110, false);
#line 120 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                                               Write(Html.Raw((item.Additions > 0) ? $"<br />Let op: Dit is <b>inclusief</b> de drankjes. ({item.Additions})" : ""));

#line default
#line hidden
            EndContext();
            BeginContext(6694, 279, true);
            WriteLiteral(@"
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </li>
");
            EndContext();
#line 127 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                        }

#line default
#line hidden
            BeginContext(7000, 27, true);
            WriteLiteral("                    </ul>\r\n");
            EndContext();
#line 129 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                }
                else
                {

#line default
#line hidden
            BeginContext(7087, 59, true);
            WriteLiteral("                    <h5>Geen facturen gevonden</h5><br />\r\n");
            EndContext();
#line 133 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
                }

#line default
#line hidden
            BeginContext(7165, 20, true);
            WriteLiteral("            </div>\r\n");
            EndContext();
#line 135 "C:\Users\maurict\Documents\GitHub\Overstag\Overstag\Views\User\Payment.cshtml"
        }

#line default
#line hidden
            BeginContext(7196, 2580, true);
            WriteLiteral(@"    </div>

<!-- Modals -->
<div id=""pay"" class=""modal"">
    <div class=""modal-content"">
        <h4>Betalen</h4>
        <h6>Je kunt er voor kiezen om zelf te betalen of om deze betaallink naar iemand anders te sturen</h6>
        <input id=""payid"" type=""text"" placeholder=""payid"" data-pid="""" />
        <a class=""btn btn-small"" onclick=""Payment.gotoPay()"">Nu zelf betalen</a>
        <a class=""btn btn-small"" onclick=""Payment.copyPay()"">Link kopiëren</a>
    </div>
    <div class=""modal-footer"">
        <a href=""#!"" class=""modal-close waves-effect waves-green btn-flat"">Sluiten</a>
    </div>
</div>

<div id=""ginvoice"" class=""modal"">
    <div class=""modal-content"">
        <h4>Factuur maken</h4>
        <p>
            Wanneer je een factuur maakt, worden alle tot nu toe niet betaalde of gefactureerde avonden
            (die staan hier boven) gefactureerd. Vervolgens kun je er zelf voor kiezen of je de factuur zelf, nu
            of later, of door een ander laat betalen door middel van ee");
            WriteLiteral(@"n betaallink.
        </p>
    </div>
    <div class=""modal-footer"">
        <a href=""#!"" class=""waves-effect waves-light btn modal-close orange"">Laat maar</a>
        <a href=""#!"" onclick=""Payment.generateInvoice()"" class=""waves-effect waves-light btn modal-close green"">Oké!</a>
    </div>
</div>

<!--Script -->
<script>
    var Payment = {
        init: function () {
            $('#_apay, #_mapay').addClass('active');
        },
        generateInvoice: function () {
            $.getJSON('/User/GenerateInvoice', function (data) {
                if (data.status == 'success') {
                    M.toast({ html: 'Factuur gemaakt', classes: 'green' })
                    window.location.reload();
                } else {
                    M.toast({ html: data.error, classes: 'red' })
                }
            });
        },
        getPay: function (payid) {
            $('#payid').data('pid', payid);
            $('#payid').val('localhost:5000/Pay/Direct/' + payid);
     ");
            WriteLiteral(@"       M.Modal.getInstance($('#pay')).open();
        },
        gotoPay: function () {
            window.location.href = '/Pay/Direct/' + $('#payid').data('pid');
        },
        copyPay: function () {
            $('#payid').select();
            document.execCommand(""copy"");
            M.toast({ html: 'Link gekopieërd!', classes: 'blue' });
        }
    }

    Payment.init();

    $(document).ready(function () {
        $('.collapsible').collapsible();
        $('.modal').modal();
    });
</script>
");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<Overstag.Models.NoDB.UnpayedEvents> Html { get; private set; }
    }
}
#pragma warning restore 1591
